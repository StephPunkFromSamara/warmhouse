asyncapi: 2.6.0
info:
  title: User Events
  version: 1.0.0
  description: |
    Асинхронные события, публикуемые в Kafka топик `users.events`.


channels:
  users.events:
    description: Топик для всех событий, связанных с пользователями
    publish:
      summary: Подписка на события пользователей
      message:
        oneOf:
          - $ref: '#/components/messages/UserCreated'
          - $ref: '#/components/messages/UserUpdated'
          - $ref: '#/components/messages/UserDeleted'
components:
  messages:
    UserCreated:
      name: UserCreated
      headers:
        eventType: string
        enum: [UserCreated]
      title: Событие создания пользователя
      contentType: application/json
      payload:
        type: object
        required:
          - type
          - userId
          - username
        properties:
          type:
            type: string
            enum: [UserCreated]
          userId:
            type: string
          username:
            type: string
          email:
            type: string

    UserUpdated:
      name: UserUpdated
      headers:
        eventType: string
        enum: [ UserUpdated ]
      title: Событие создания пользователя
      contentType: application/json
      payload:
        type: object
        required:
          - type
          - userId
          - username
        properties:
          type:
            type: string
            enum: [ UserCreated ]
          userId:
            type: string
          username:
            type: string
          email:
            type: string
    UserDeleted:
      name: UserDeleted
      eventType: string
      enum: [ UserDeleted ]
      title: Событие удаления пользователя
      contentType: application/json
      payload:
        type: object
        required:
          - userId
        properties:
          type:
            type: string
            enum: [UserDeleted]
          userId:
            type: string